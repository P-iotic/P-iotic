<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>P-iotic | IT Student Portfolio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone"></script>
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <style>
    body {
      background-color: #121212;
      color: #ffffff;
      font-family: 'Georgia', serif;
      margin: 0;
    }
    #particles-js {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
  </style>
</head>
<body>
  <div id="particles-js"></div>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

    // Navigation Component
    function Navigation({ isDarkTheme, toggleTheme }) {
      const navLinks = [
        { name: 'Home', href: '/index.html' },
        { name: 'Poetry', href: '/poetry.html' },
        { name: 'Velaphi', href: '/velaphi.html' },
        { name: 'Projects', href: '#projects' },
        { name: 'About', href: '#about' },
        { name: 'Contact', href: 'mailto:youremail@example.com' },
      ];
      return (
        <nav className={`p-4 ${isDarkTheme ? 'bg-[#1a1a1a]' : 'bg-gray-200'} fixed top-0 w-full z-10`}>
          <ul className="flex justify-center space-x-6">
            {navLinks.map((link, index) => (
              <li key={index}>
                <a
                  href={link.href}
                  className={`font-verdana text-lg ${isDarkTheme ? 'text-[#d4a017] hover:text-[#e6b800]' : 'text-[#121212] hover:text-[#d4a017]'}`}
                >
                  {link.name}
                </a>
              </li>
            ))}
            <li>
              <button
                onClick={toggleTheme}
                className="px-4 py-1 bg-[#d4a017] text-white rounded hover:bg-[#e6b800] font-verdana text-lg"
              >
                Toggle Theme
              </button>
            </li>
          </ul>
        </nav>
      );
    }

    // Header Component
    function Header({ isDarkTheme }) {
      return (
        <header className={`text-center p-8 mt-16 ${isDarkTheme ? 'bg-[#1a1a1a]/80' : 'bg-gray-200/80'} backdrop-blur-sm max-w-2xl mx-auto rounded-lg`}>
          <h1 className={`text-4xl font-bold font-verdana ${isDarkTheme ? 'text-white' : 'text-[#121212]'}`}>
            P-iotic
          </h1>
          <p className={`text-lg mt-2 ${isDarkTheme ? 'text-[#cccccc]' : 'text-gray-600'}`}>
            BSc IT Final Year Student | North-West University
          </p>
        </header>
      );
    }

    // Skills Component
    function Skills({ isDarkTheme }) {
      const skills = ['Java', 'Python', 'C++', 'C#', 'Cybersecurity'];
      return (
        <section className={`mx-auto max-w-2xl p-8 rounded-lg ${isDarkTheme ? 'bg-[#1a1a1a]/80' : 'bg-white/80'} my-4 backdrop-blur-sm`}>
          <h2 className="text-2xl font-verdana text-[#d4a017] text-center mb-4">Skills</h2>
          <ul className="flex flex-wrap justify-center gap-4">
            {skills.map((skill, index) => (
              <li
                key={index}
                className={`px-4 py-2 border border-[#d4a017] rounded ${isDarkTheme ? 'bg-[#121212] text-[#cccccc]' : 'bg-gray-100 text-gray-800'}`}
              >
                {skill}
              </li>
            ))}
          </ul>
        </section>
      );
    }

    // Story Link Component
    function StoryLink({ isDarkTheme }) {
      return (
        <section className={`mx-auto max-w-2xl p-8 rounded-lg ${isDarkTheme ? 'bg-[#1a1a1a]/80' : 'bg-white/80'} my-4 backdrop-blur-sm`}>
          <h2 className="text-2xl font-verdana text-[#d4a017] text-center mb-4">Creative Writing</h2>
          <p className={`text-lg ${isDarkTheme ? 'text-[#cccccc]' : 'text-gray-800'} text-center`}>
            Explore my short story series, <em>Velaphi</em>, a piece of kasi folklore written for fun.
          </p>
          <a
            href="/velaphi.html"
            className="block text-center text-[#d4a017] hover:underline font-verdana mt-4 text-xl font-bold"
          >
            Read Velaphi — Episode 1: Ubuya Njani?
          </a>
        </section>
      );
    }

    // Footer Component
    function Footer({ isDarkTheme }) {
      return (
        <footer className={`text-center p-6 ${isDarkTheme ? 'bg-[#1a1a1a]/80' : 'bg-gray-200/80'} backdrop-blur-sm`}>
          <p className={`text-sm ${isDarkTheme ? 'text-gray-500' : 'text-gray-600'}`}>
            © 2025 P-iotic. All rights reserved.
          </p>
        </footer>
      );
    }

    // App Component
    function App() {
      const [isDarkTheme, setIsDarkTheme] = useState(() => {
        const savedTheme = localStorage.getItem('theme');
        return savedTheme === 'light' ? false : true;
      });

      useEffect(() => {
        particlesJS('particles-js', {
          particles: {
            number: { value: 80, density: { enable: true, value_area: 800 } },
            color: { value: ['#d4a017', '#cccccc'] },
            shape: { type: 'circle' },
            opacity: { value: 0.5, random: true },
            size: { value: 3, random: true },
            line_linked: { enable: true, distance: 150, color: '#d4a017', opacity: 0.4, width: 1 },
            move: { enable: true, speed: 2, direction: 'none', random: true, out_mode: 'out' }
          },
          interactivity: {
            detect_on: 'canvas',
            events: { onhover: { enable: true, mode: 'grab' }, onclick: { enable: true, mode: 'push' }, resize: true },
            modes: { grab: { distance: 200, line_linked: { opacity: 0.7 } }, push: { particles_nb: 4 } }
          },
          retina_detect: true
        });
        localStorage.setItem('theme', isDarkTheme ? 'dark' : 'light');
        console.log('App rendered, isDarkTheme:', isDarkTheme);
        return () => {
          if (window.pJSDom && window.pJSDom.length) {
            window.pJSDom[0].pJS.fn.vendors.destroypJS();
            window.pJSDom = [];
          }
        };
      }, [isDarkTheme]);

      const toggleTheme = () => {
        setIsDarkTheme(!isDarkTheme);
      };

      return (
        <div className={isDarkTheme ? 'bg-[#121212]' : 'bg-gray-100'}>
          <Navigation isDarkTheme={isDarkTheme} toggleTheme={toggleTheme} />
          <Header isDarkTheme={isDarkTheme} />
          <Skills isDarkTheme={isDarkTheme} />
          <StoryLink isDarkTheme={isDarkTheme} />
          <Footer isDarkTheme={isDarkTheme} />
        </div>
      );
    }

    try {
      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    } catch (error) {
      console.error('Error rendering React app:', error);
      document.getElementById('root').innerHTML = '<p style="color: #ffffff; text-align: center;">Failed to load portfolio. Please try refreshing the page.</p>';
    }
  </script>
</body>
</html>